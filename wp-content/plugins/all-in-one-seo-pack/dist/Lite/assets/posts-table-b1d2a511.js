import{_ as k,r as w,o as c,c as d,f as o,d as h,a as u,g as a,t as p,q as v,u as T,x as $,n as I,h as P,b as y,j as x}from"./js/_plugin-vue_export-helper.2d9794a3.js";import{l as L}from"./js/index.66313bbb.js";import{l as O}from"./js/index.fd0fcee8.js";import{l as j}from"./js/index.0b123ab1.js";import{a as M,t as z,T as R}from"./js/postContent.bb42e0a8.js";import{e as D}from"./js/elemLoaded.9a6eb745.js";import{e as b,g as A,m as f,s as E}from"./js/index.02a5ed9a.js";import{a as N}from"./js/vuex.esm-bundler.8589b2dd.js";import"./js/WpTable.4d19dc46.js";import"./js/default-i18n.ab92175e.js";import"./js/constants.7044c894.js";import{a as S,b as q}from"./js/Caret.42a820e0.js";import{t as U}from"./js/html.14f2a8b9.js";import"./js/SaveChanges.bc66cd69.js";import{T as V}from"./js/TruSeoScore.76897846.js";import{C as F}from"./js/ScoreButton.e74a21e9.js";import"./js/client.e7a26247.js";import"./js/_commonjsHelpers.f84db168.js";import"./js/helpers.de7566d0.js";import"./js/cleanForSlug.62b08993.js";import"./js/isArrayLikeObject.c492f682.js";import"./js/RequiresUpdate.52f5acf2.js";import"./js/Index.1fd8fc42.js";const G={components:{CoreScoreButton:F,SvgCircleCheck:S,SvgCircleClose:q},mixins:[V],props:{post:Object,index:Number},data(){return{postId:null,columnName:null,value:null,title:null,titleParsed:null,postDescription:null,descriptionParsed:null,imageTitle:null,imageAltTag:null,showEditTitle:!1,showEditDescription:!1,showEditImageTitle:!1,showEditImageAltTag:!1,showTruSeo:!1,isSpecialPage:!1,strings:{title:this.$t.__("Title:",this.$td),description:this.$t.__("Description:",this.$td),imageTitle:this.$t.__("Image Title:",this.$td),imageAltTag:this.$t.__("Image Alt Tag:",this.$td),edit:this.$t.__("Edit",this.$td),save:this.$t.__("Save",this.$td),cancel:this.$t.__("Cancel",this.$td),wait:this.$t.__("Please wait...",this.$td)}}},computed:{...N(["options","currentPost"])},methods:{save(){this.showEditTitle=!1,this.showEditDescription=!1,this.post.title=this.title,this.post.description=this.postDescription,this.$http.post(this.$links.restUrl("postscreen")).send({postId:this.post.id,title:this.post.title,description:this.post.description}).then(s=>{this.titleParsed=s.body.title,this.descriptionParsed=s.body.description,this.post.titleParsed=s.body.title,this.post.descriptionParsed=s.body.description;const e=window.aioseo.posts;e[this.index]=this.post,b(this.$.appContext.app,{posts:e}),this.$root._data.screen.base!=="upload"&&this.runAnalysis(this.post.id)}).catch(s=>{console.error(`Unable to update post with ID ${this.post.id}: ${s}`)})},saveImage(){this.showEditImageTitle=!1,this.showEditImageAltTag=!1,this.post.title=this.title,this.post.description=this.postDescription,this.post.imageTitle=this.imageTitle,this.post.imageAltTag=this.imageAltTag,this.$http.post(this.$links.restUrl("postscreen")).send({postId:this.post.id,isMedia:!0,title:this.post.title,description:this.post.description,imageTitle:this.post.imageTitle,imageAltTag:this.post.imageAltTag}).then(()=>{}).catch(s=>{console.error(`Unable to update attachment with ID ${this.post.id}: ${s}`)})},cancel(){this.value=this.post.value,this.showEditTitle=!1,this.showEditDescription=!1,this.showEditImageTitle=!1,this.showEditImageAltTag=!1},editTitle(){this.showEditTitle=!0},editDescription(){this.showEditDescription=!0},editImageTitle(){this.showEditImageTitle=!0},editImageAlt(){this.showEditImageAltTag=!0},truncate:U,updatePostTitle(s,e){const l=document.getElementById(`post-${s}`);if(!l)return;const g=l.getElementsByClassName("title")[0].getElementsByTagName("a")[0];if(!g)return;const t=g.getElementsByTagName("span")[0];g.innerText=e,g.prepend(t)}},mounted(){this.postId=this.post.id,this.columnName=this.post.columnName,this.value=this.post.value,this.imageTitle=this.post.imageTitle,this.imageAltTag=this.post.imageAltTag,this.isSpecialPage=this.post.isSpecialPage,this.title=this.post.title||this.post.defaultTitle,this.titleParsed=this.post.titleParsed,this.postDescription=this.post.description||this.post.defaultDescription,this.descriptionParsed=this.post.descriptionParsed},async created(){const{options:s,currentPost:e,tags:l}=await A(this.$.appContext.app);this.$store.state.options=f({...this.$store.state.options},{...s}),this.$store.state.currentPost=f({...this.$store.state.currentPost},{...e}),this.$store.state.tags=f({...this.$store.state.tags},{...l}),this.showTruSeo=M()}},H={key:0,class:"edit-row"},J={key:1,class:"edit-row edit-title"},K=["title"],Q=["id"],W={key:2,class:"edit-row"},X=["title"],Y=["title"],Z={key:3,class:"edit-row edit-description"},tt=["title"],et=["id"],st={key:4,class:"edit-row"},it=["title"],ot=["title"],nt={key:5,class:"edit-row edit-image-title"},lt=["title"],rt=["id"],at={key:6,class:"edit-row"},ct=["title"],dt=["title"],ht={key:7,class:"edit-row edit-image-alt"},ut=["title"],pt=["id"],mt={key:8,class:"edit-row"},gt=["title"],_t=["title"];function wt(s,e,l,g,t,i){const _=w("core-score-button"),m=w("svg-circle-check"),r=w("svg-circle-close");return c(),d("div",{class:I(["aioseo-details-column",{editing:t.showEditTitle||t.showEditDescription||t.showEditImageTitle||t.showEditImageAltTag}])},[o("div",null,[this.$root._data.screen.base==="edit"&&t.showTruSeo&&this.$allowed("aioseo_page_analysis")&&!t.isSpecialPage?(c(),d("div",H,[h(_,{score:this.post.value,postId:t.postId},null,8,["score","postId"])])):u("",!0),this.$allowed("aioseo_page_general_settings")?(c(),d("div",J,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[0]||(e[0]=a((...n)=>i.editTitle&&i.editTitle(...n),["prevent"]))},null,8,K),o("strong",null,p(t.strings.title)+" ",1),o("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},p(i.truncate(t.titleParsed,100)),9,Q)])):u("",!0),t.showEditTitle?(c(),d("div",W,[v(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=n=>t.title=n),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.title]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[2]||(e[2]=a((...n)=>i.save&&i.save(...n),["prevent"])),title:t.strings.save},[h(m,{width:"20"})],8,X),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[3]||(e[3]=a((...n)=>i.cancel&&i.cancel(...n),["prevent"])),title:t.strings.cancel},[h(r,{width:"20"})],8,Y)])):u("",!0),this.$allowed("aioseo_page_general_settings")?(c(),d("div",Z,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[4]||(e[4]=a((...n)=>i.editDescription&&i.editDescription(...n),["prevent"]))},null,8,tt),o("strong",null,p(t.strings.description)+" ",1),o("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},p(i.truncate(t.descriptionParsed)),9,et)])):u("",!0),t.showEditDescription?(c(),d("div",st,[v(o("textarea",{"onUpdate:modelValue":e[5]||(e[5]=n=>t.postDescription=n),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.postDescription]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[6]||(e[6]=a((...n)=>i.save&&i.save(...n),["prevent"])),title:t.strings.save},[h(m,{width:"20"})],8,it),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[7]||(e[7]=a((...n)=>i.cancel&&i.cancel(...n),["prevent"])),title:t.strings.cancel},[h(r,{width:"20"})],8,ot)])):u("",!0),$(s.$slots,"default"),this.$root._data.screen.base==="upload"&&l.post.showMedia?(c(),d("div",nt,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[8]||(e[8]=a((...n)=>i.editImageTitle&&i.editImageTitle(...n),["prevent"]))},null,8,lt),o("strong",null,p(t.strings.imageTitle),1),o("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},p(t.imageTitle),9,rt)])):u("",!0),t.showEditImageTitle?(c(),d("div",at,[v(o("textarea",{"onUpdate:modelValue":e[9]||(e[9]=n=>t.imageTitle=n),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.imageTitle]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[10]||(e[10]=a((...n)=>i.saveImage&&i.saveImage(...n),["prevent"])),title:t.strings.save},[h(m,{width:"20"})],8,ct),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[11]||(e[11]=a((...n)=>i.cancel&&i.cancel(...n),["prevent"])),title:t.strings.cancel},[h(r,{width:"20"})],8,dt)])):u("",!0),this.$root._data.screen.base==="upload"&&l.post.showMedia?(c(),d("div",ht,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[12]||(e[12]=a((...n)=>i.editImageAlt&&i.editImageAlt(...n),["prevent"]))},null,8,ut),o("strong",null,p(t.strings.imageAltTag),1),o("span",{id:`aioseo-${t.columnName}-${t.postId}-value`},p(t.imageAltTag),9,pt)])):u("",!0),t.showEditImageAltTag?(c(),d("div",mt,[v(o("textarea",{"onUpdate:modelValue":e[13]||(e[13]=n=>t.imageAltTag=n),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.imageAltTag]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[14]||(e[14]=a((...n)=>i.saveImage&&i.saveImage(...n),["prevent"])),title:t.strings.save},[h(m,{width:"20"})],8,gt),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[15]||(e[15]=a((...n)=>i.cancel&&i.cancel(...n),["prevent"])),title:t.strings.cancel},[h(r,{width:"20"})],8,_t)])):u("",!0)])],2)}const vt=k(G,[["render",wt]]),Tt={components:{CorePostColumn:vt},props:{post:Object,index:Number}};function ft(s,e,l,g,t,i){const _=w("core-post-column");return c(),P(_,{post:l.post,index:l.index},null,8,["post","index"])}const C=k(Tt,[["render",ft]]),kt={components:{PostColumn:C,PostColumnLite:C},props:{post:Object,index:Number}};function Pt(s,e,l,g,t,i){const _=w("PostColumn"),m=w("PostColumnLite");return c(),d("div",null,[s.$isPro?(c(),P(_,{key:0,post:l.post,index:l.index},null,8,["post","index"])):u("",!0),s.$isPro?u("",!0):(c(),P(m,{key:1,post:l.post,index:l.index},null,8,["post","index"]))])}const Et=k(kt,[["render",Pt]]);const Ct={components:{SvgCircleCheck:S,SvgCircleClose:q},mixins:[V],props:{term:Object,index:Number},data(){return{termId:null,columnName:null,title:null,titleParsed:null,termDescription:null,descriptionParsed:null,showEditTitle:!1,showEditDescription:!1,showTruSeo:!1,strings:{title:this.$t.__("Title:",this.$td),description:this.$t.__("Description:",this.$td),edit:this.$t.__("Edit",this.$td),save:this.$t.__("Save",this.$td),cancel:this.$t.__("Cancel",this.$td),wait:this.$t.__("Please wait...",this.$td)}}},computed:{...N(["options","currentPost"])},methods:{save(){this.showEditTitle=!1,this.showEditDescription=!1,this.term.title=this.title,this.term.description=this.termDescription,this.$http.post(this.$links.restUrl("termscreen")).send({termId:this.term.id,title:this.term.title,description:this.term.description}).then(s=>{this.titleParsed=s.body.title,this.descriptionParsed=s.body.description,this.term.titleParsed=s.body.title,this.term.descriptionParsed=s.body.description;const e=window.aioseo.terms;e[this.index]=this.term,b(this.$.appContext.app,{terms:e})}).catch(s=>{console.error(`Unable to update term with ID ${this.term.id}: ${s}`)})},cancel(){this.showEditTitle=!1,this.showEditDescription=!1},editTitle(){this.showEditTitle=!0},editDescription(){this.showEditDescription=!0},truncate:U},mounted(){this.termId=this.term.id,this.columnName=this.term.columnName,this.title=this.term.title,this.titleParsed=this.term.titleParsed,this.termDescription=this.term.description,this.descriptionParsed=this.term.descriptionParsed},async created(){const{options:s,currentPost:e,tags:l}=await A(this.$.appContext.app);this.$store.state.options=f({...this.$store.state.options},{...s}),this.$store.state.currentPost=f({...this.$store.state.currentPost},{...e}),this.$store.state.tags=f({...this.$store.state.tags},{...l}),this.showTruSeo=z()}},It={class:"edit-row edit-title"},yt=["title"],xt=["id"],Dt={key:0,class:"edit-row"},bt=["title"],At=["title"],Nt={class:"edit-row edit-description"},St=["title"],qt=["id"],Ut={key:1,class:"edit-row"},Vt=["title"],Bt=["title"];function $t(s,e,l,g,t,i){const _=w("svg-circle-check"),m=w("svg-circle-close");return c(),d("div",{class:I(["aioseo-details-column",{editing:t.showEditTitle||t.showEditDescription}])},[o("div",null,[o("div",It,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[0]||(e[0]=a((...r)=>i.editTitle&&i.editTitle(...r),["prevent"]))},null,8,yt),o("strong",null,p(t.strings.title),1),o("span",{id:`aioseo-${t.columnName}-${t.termId}-value`},p(i.truncate(t.titleParsed,100)),9,xt)]),t.showEditTitle?(c(),d("div",Dt,[v(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=r=>t.title=r),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.title]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[2]||(e[2]=a((...r)=>i.save&&i.save(...r),["prevent"])),title:t.strings.save},[h(_,{width:"20"})],8,bt),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[3]||(e[3]=a((...r)=>i.cancel&&i.cancel(...r),["prevent"])),title:t.strings.cancel},[h(m,{width:"20"})],8,At)])):u("",!0),o("div",Nt,[o("a",{class:"dashicons dashicons-edit aioseo-quickedit",title:t.strings.edit,onClick:e[4]||(e[4]=a((...r)=>i.editDescription&&i.editDescription(...r),["prevent"]))},null,8,St),o("strong",null,p(t.strings.description),1),o("span",{id:`aioseo-${t.columnName}-${t.termId}-value`},p(i.truncate(t.descriptionParsed)),9,qt)]),t.showEditDescription?(c(),d("div",Ut,[v(o("textarea",{"onUpdate:modelValue":e[5]||(e[5]=r=>t.termDescription=r),class:"aioseo-quickedit-input",rows:"4",columns:"32"},null,512),[[T,t.termDescription]]),o("a",{class:"dashicons aioseo-quickedit-input-save",onClick:e[6]||(e[6]=a((...r)=>i.save&&i.save(...r),["prevent"])),title:t.strings.save},[h(_,{width:"20"})],8,Vt),o("a",{class:"dashicons aioseo-quickedit-input-cancel",onClick:e[7]||(e[7]=a((...r)=>i.cancel&&i.cancel(...r),["prevent"])),title:t.strings.cancel},[h(m,{width:"20"})],8,Bt)])):u("",!0)])],2)}const Lt=k(Ct,[["render",$t]]),B=s=>(s=L(s),s=O(s),s=j(s),s.use(E),E._vm=s,s.config.globalProperties.$truSeo=new R,s),Ot=(s,e)=>{B(y({data(){return{screen:window.aioseo.screen}},render:()=>x(Et)},{post:s,index:e})).mount(`#${s.columnName}-${s.id}`)};window.aioseo.posts&&window.aioseo.posts.forEach((s,e)=>{D(`#${s.columnName}-${s.id}`,`aioseoPostsTable-${s.id}`),document.addEventListener("animationstart",function(l){`aioseoPostsTable-${s.id}`===l.animationName&&Ot(s,e)},{passive:!0})});const jt=(s,e)=>{B(y({data(){return{screen:window.aioseo.screen}},render:()=>x(Lt)},{term:s,index:e})).mount(`#${s.columnName}-${s.id}`)};window.aioseo.terms&&window.aioseo.posts.length===0&&window.aioseo.terms.forEach((s,e)=>{D(`#${s.columnName}-${s.id}`,`aioseoTermsTable-${s.id}`),document.addEventListener("animationstart",function(l){`aioseoTermsTable-${s.id}`===l.animationName&&jt(s,e)},{passive:!0})});
