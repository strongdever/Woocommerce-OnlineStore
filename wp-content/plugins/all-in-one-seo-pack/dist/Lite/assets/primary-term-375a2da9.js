import{_,r as c,o as h,c as f,d as m,f as d,g,a as T,b as x}from"./js/_plugin-vue_export-helper.2d9794a3.js";import{l as $}from"./js/index.66313bbb.js";import{l as S}from"./js/index.fd0fcee8.js";import{l as v}from"./js/index.0b123ab1.js";import{e as E}from"./js/elemLoaded.9a6eb745.js";import{s as k}from"./js/postContent.bb42e0a8.js";import{m as b}from"./js/vuex.esm-bundler.8589b2dd.js";import{i as w,d as A,s as l}from"./js/index.02a5ed9a.js";import{S as P}from"./js/Standalone.a8f81b27.js";import{S as B}from"./js/Information.a08d0ef0.js";import{S as L}from"./js/Caret.42a820e0.js";import"./js/client.e7a26247.js";import"./js/_commonjsHelpers.f84db168.js";import"./js/default-i18n.ab92175e.js";import"./js/helpers.de7566d0.js";import"./js/constants.7044c894.js";import"./js/isArrayLikeObject.c492f682.js";import"./js/cleanForSlug.62b08993.js";import"./js/html.14f2a8b9.js";const C={getTerms:async e=>{const{apiFetch:t}=window.wp,{addQueryArgs:o}=window.wp.url,r=u(e);return await t({path:o(`/wp/v2/${r.restBase}`,{per_page:-1,orderby:"count",order:"desc",_fields:"id,name"})})},getSelectedTerms:e=>{const t=u(e);return window.wp.data.select("core/editor").getEditedPostAttribute(t.restBase)||[]}},D={getTerms:async e=>{const t=[];return document.getElementById(`${e}checklist`).querySelectorAll("li").forEach(r=>{const s=r.querySelector("input").value,n=r.querySelector("label").innerText;t.push({id:parseInt(s,10),name:n.trim()})}),new Promise(r=>{r(t)})},getSelectedTerms:e=>{const t=document.getElementById(`${e}checklist`).querySelectorAll("input:checked"),o=[];return t.forEach(r=>{o.push(parseInt(r.value,10))}),o}},p=()=>{var t;return(((t=window.aioseo.postData)==null?void 0:t.taxonomies)||[]).filter(o=>o.primaryTermSupport===!0)},I=e=>p().some(t=>e===t.slug),u=e=>{const t=p().filter(o=>e===o.slug);return t.length?t[0]:{}},M=e=>w()?C.getSelectedTerms(e):D.getSelectedTerms(e);const N={mixins:[P],components:{SvgCircleInformation:B,SvgClose:L},data(){return{selectedTerms:[],strings:{didYouKnow:this.$t.sprintf(this.$t.__("Did you know that %1$s Pro allows you to choose a %2$sprimary category%3$s for your posts? This feature works hand in hand with our powerful Breadcrumbs template to give you full navigational control to help improve your search rankings!",this.$td),"AIOSEO","<strong>","</strong>"),learnMoreLink:this.$t.sprintf('<a href="%1$s" target="_blank" rel="noreferrer nofollow">%2$s<span class="link-right-arrow">&nbsp;&rarr;</span></a>',this.$links.getDocUrl("primaryTerm"),this.$t.__("Learn more",this.$td))}}},props:{taxonomy:String},methods:{...b(["disablePrimaryTermEducation"]),updateSelectedTerms(){this.selectedTerms=M(this.taxonomy)}},computed:{canShowUpsell(){const{options:e}=this.currentPost;return!e.primaryTerm.productEducationDismissed&&1<this.selectedTerms.length}},mounted(){this.updateSelectedTerms(),this.$bus.$on("updateSelectedTerms",this.updateSelectedTerms)},beforeDestroy(){this.$bus.$off("updateSelectedTerms",this.updateSelectedTerms)}},H={key:0,class:"aioseo-primary-term-cta"},q=["innerHTML"],U=["innerHTML"];function V(e,t,o,r,s,n){const i=c("svg-circle-information"),a=c("svg-close");return n.canShowUpsell?(h(),f("div",H,[m(i,{width:"15",height:"15"}),d("p",{innerHTML:s.strings.didYouKnow},null,8,q),d("p",{innerHTML:s.strings.learnMoreLink},null,8,U),m(a,{onClick:g(e.disablePrimaryTermEducation,["stop"])},null,8,["onClick"])])):T("",!0)}const F=_(N,[["render",V]]);const K={components:{PrimaryTerm:F},props:{taxonomy:String}},O={class:"aioseo-app aioseo-primary-term"};function Q(e,t,o,r,s,n){const i=c("primary-term");return h(),f("div",O,[m(i,{taxonomy:o.taxonomy},null,8,["taxonomy"])])}const Y=_(K,[["render",Q]]);if(w()&&window.wp){const{createElement:e,Fragment:t}=window.wp.element,{addFilter:o}=window.wp.hooks,{createHigherOrderComponent:r}=window.wp.compose,{subscribe:s}=window.wp.data;o("editor.PostTaxonomyType","aioseo/primary-term",r(n=>i=>{const{slug:a}=i;return I(a)?e(t,{},e(n,i),e("div",{id:`aioseo-primary-term-${a}`},e("div",{className:"aioseo-primary-term-app",taxonomy:a}))):e(n,i)},"withInspectorControls")),s(()=>{window.aioseoBus.$emit("updateSelectedTerms")})}A()&&p().forEach(e=>{const t=document.querySelector(`#${e.name}div .inside`);if(!t)return;const o=document.createElement("div");o.setAttribute("id",`aioseo-primary-term-${e.slug}`),o.setAttribute("class","aioseo-primary-term-app"),o.setAttribute("taxonomy",e.slug),t.append(o),function(r){r(`#${e.name}checklist`).on("change",'input[type="checkbox"]',()=>{window.aioseoBus.$emit("updateSelectedTerms")}),r(`#${e.name}checklist`).on("wpListAddEnd",()=>{window.aioseoBus.$emit("updateSelectedTerms")})}(window.jQuery)});const y=e=>{if(!e)return;const t=e.getAttribute("taxonomy");let o=x(Y,{taxonomy:t});o=$(o),o=S(o),o=v(o),l._vm=o,o.use(l),o.mount(e)};if(k()&&window.aioseo&&window.aioseo.currentPost&&window.aioseo.currentPost.context==="post"){const e=document.getElementsByClassName("aioseo-primary-term-app");Array.prototype.forEach.call(e,t=>y(t)),E(".aioseo-primary-term-app","aioseoPrimaryTerm"),document.addEventListener("animationstart",function(t){t.animationName==="aioseoPrimaryTerm"&&y(t.target)},{passive:!0})}
