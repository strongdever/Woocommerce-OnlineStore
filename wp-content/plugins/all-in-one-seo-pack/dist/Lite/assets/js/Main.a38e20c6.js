import{D as c}from"./index.02a5ed9a.js";import{a as d,d as w,m as b,b as M}from"./vuex.esm-bundler.8589b2dd.js";import{C as L}from"./index.fd0fcee8.js";import{_ as h,r as o,o as r,h as l,w as n,f as v,t as _,a as u,c as g,d as p,k as f,e as D}from"./_plugin-vue_export-helper.2d9794a3.js";import{B as T}from"./DatePicker.27d1c055.js";import{C as A}from"./Blur.a27209d0.js";import{C as B}from"./Index.02941e99.js";import O from"./ContentRankings.610744fc.js";import{C as P}from"./Index.a5b2ee90.js";import R from"./Dashboard.973b67ad.js";import J from"./KeywordRankings.7817ef0b.js";import G from"./SeoStatistics.c2e361fa.js";import"./isArrayLikeObject.c492f682.js";import"./default-i18n.ab92175e.js";import"./_commonjsHelpers.f84db168.js";import"./helpers.de7566d0.js";import"./Caret.42a820e0.js";import"./cleanForSlug.62b08993.js";import"./constants.7044c894.js";import"./isUndefined.79142820.js";import"./_getAllKeys.b9d35dab.js";import"./_getTag.af0e2981.js";import"./debounce.701f12ed.js";import"./toNumber.9672b166.js";import"./isEqual.5aecc864.js";import"./_baseIsEqual.4bbe60b2.js";/* empty css             */import"./params.597cd0f5.js";import"./WpTable.4d19dc46.js";import"./RequiresUpdate.52f5acf2.js";import"./postContent.bb42e0a8.js";import"./html.14f2a8b9.js";import"./Index.1fd8fc42.js";import"./SaveChanges.bc66cd69.js";import"./Header.33faf032.js";import"./LicenseKeyBar.89175103.js";import"./LogoGear.55b490aa.js";import"./AnimatedNumber.1ae76b8e.js";import"./Logo.81e1a7f3.js";import"./Support.7b58db1c.js";import"./Tabs.eb56046b.js";import"./TruSeoScore.76897846.js";import"./Information.a08d0ef0.js";import"./Slide.cd756e61.js";import"./Date.47e384e5.js";import"./Exclamation.9b2c9d16.js";import"./Url.c71d5763.js";import"./Gear.b05c5b07.js";import"./Row.5e452de4.js";import"./PostsTable.b3e86ebe.js";import"./PostTypes.9ab32454.js";import"./Statistic.6583e19d.js";import"./_arrayEach.56a9f647.js";import"./vue.runtime.esm-bundler.4b666f07.js";import"./Tooltip.ae0bcccb.js";import"./ScoreButton.e74a21e9.js";import"./Table.1a0736e7.js";import"./RequiredPlans.661fcd2c.js";import"./Card.24f1a534.js";import"./Overview.3825d08e.js";import"./DonutChartWithLegend.04bf1a74.js";import"./KeywordsGraph.76315512.js";import"./SeoStatisticsOverview.30c3feba.js";import"./List.13565ae7.js";import"./Statistics.5c81b0a5.js";const N={components:{CoreAlert:L},data(){return{error:this.$t.__("Your connection with Google Search Console has expired or is invalid. Please check that your site is verified in Google Search Console and try to reconnect. If the problem persists, please contact our support team.",this.$tdPro)}},computed:{...d(["internalOptions"]),...d("search-statistics",["unverifiedSite"]),invalidAuthentication(){var t,s;return this.unverifiedSite||typeof((s=(t=this.internalOptions.internal)==null?void 0:t.searchStatistics)==null?void 0:s.profile)!="object"}}};function U(t,s,i,C,a,e){const m=o("core-alert");return e.invalidAuthentication?(r(),l(m,{key:0,class:"aioseo-input-error aioseo-search-statistics-authentication-alert",type:"red"},{default:n(()=>[v("strong",null,_(a.error),1)]),_:1})):u("",!0)}const V=h(N,[["render",U]]),F={};function I(t,s){return r(),g("div")}const z=h(F,[["render",I]]),E={};function H(t,s){return r(),g("div")}const j=h(E,[["render",H]]);const q={emits:["rolling"],components:{AuthenticationAlert:V,BaseDatePicker:T,CoreBlur:A,CoreMain:B,ContentRankings:O,Cta:P,Dashboard:R,KeywordRankings:J,PostDetail:z,Settings:j,SeoStatistics:G},data(){return{maxDate:null,minDate:null,loadingConnect:!1,strings:{pageName:this.$t.__("Search Statistics",this.$td),ctaHeaderText:this.$t.__("Connect your website to Google Search Console",this.$td),ctaDescription:this.$t.__("Connect to Google Search Console to receive valuable insights on how your content is being discovered. Identify areas for improvement in order to improve search engine rankings and drive more traffic to your website.",this.$td),ctaButtonText:this.$t.__("Connect to Google Search Console",this.$td),feature1:this.$t.__("Search traffic insights",this.$td),feature2:this.$t.__("Improved visibility",this.$td),feature3:this.$t.__("Track page and keyword rankings",this.$td),feature4:this.$t.__("Speed tests for individual pages/posts",this.$td)}}},computed:{...d("search-statistics",["range","isConnected","fetching","scanPercentage","showScanPopup","unverifiedSite"]),...w(["isUnlicensed"]),defaultRange(){const t=new Date(`${this.range.start} 00:00:00`),s=new Date(`${this.range.end} 00:00:00`);return[t,s]},excludeTabs(){const t=["post-detail"];return(this.isUnlicensed||!this.$license.hasCoreFeature(this.$aioseo,"search-statistics"))&&t.push("settings"),t},isSettings(){return this.$route.name==="settings"},showConnectCta(){return(this.$license.hasCoreFeature(this.$aioseo,"search-statistics")&&!this.isConnected||this.unverifiedSite)&&!this.isSettings},showDatePicker(){return!["settings","content-rankings"].includes(this.$route.name)&&this.isConnected&&!this.unverifiedSite},containerClasses(){const t=[];return this.fetching&&t.push("aioseo-blur"),t},getOriginalMaxDate(){return this.$aioseo.searchStatistics.latestAvailableDate?c.fromFormat(this.$aioseo.searchStatistics.latestAvailableDate,"yyyy-MM-dd").setZone(c.zone)||c.local().plus({days:-2}):c.local().plus({days:-2})},datepickerShortcuts(){return[{text:this.$t.__("Last 7 Days",this.$td),value:()=>(window.aioseoBus.$emit("rolling","last7Days"),[this.getOriginalMaxDate.plus({days:-6}).toJSDate(),this.getOriginalMaxDate.toJSDate()])},{text:this.$t.__("Last 28 Days",this.$td),value:()=>(window.aioseoBus.$emit("rolling","last28Days"),[this.getOriginalMaxDate.plus({days:-27}).toJSDate(),this.getOriginalMaxDate.toJSDate()])},{text:this.$t.__("Last 3 Months",this.$td),value:()=>(window.aioseoBus.$emit("rolling","last3Months"),[this.getOriginalMaxDate.plus({days:-89}).toJSDate(),this.getOriginalMaxDate.toJSDate()])}]}},methods:{...b("search-statistics",["setDateRange","getAuthUrl"]),...M("search-statistics",["toggleShowScanPopup"]),isDisabledDate(t){return this.minDate===null?!0:t.getTime()<this.minDate.getTime()||t.getTime()>this.maxDate.getTime()},onDateChange(t,s){this.setDateRange({dateRange:t,rolling:s})},connect(){this.loadingConnect=!0,this.getAuthUrl().then(t=>{window.location=t})},highlightShortcut(t){if(!t)return;document.querySelectorAll(".el-picker-panel__shortcut").forEach(i=>{switch(i.innerText){case this.$t.__("Last 7 Days",this.$td):t==="last7Days"?i.classList.add("active"):i.classList.remove("active");break;case this.$t.__("Last 28 Days",this.$td):t==="last28Days"?i.classList.add("active"):i.classList.remove("active");break;case this.$t.__("Last 3 Months",this.$td):t==="last3Months"?i.classList.add("active"):i.classList.remove("active");break;case this.$t.__("Last 6 Months",this.$td):t==="last6Months"?i.classList.add("active"):i.classList.remove("active");break;default:i.classList.remove("active")}})}},mounted(){this.minDate=c.now().plus({months:-16}).toJSDate(),this.maxDate=this.getOriginalMaxDate.toJSDate()}},K={key:0,class:"connect-cta"};function Y(t,s,i,C,a,e){const m=o("base-date-picker"),y=o("authentication-alert"),S=o("core-blur"),$=o("cta"),x=o("core-main");return r(),l(x,{"page-name":a.strings.pageName,"exclude-tabs":e.excludeTabs,showTabs:!e.excludeTabs.includes(t.$route.name),containerClasses:e.containerClasses},{extra:n(()=>[e.showDatePicker?(r(),l(m,{key:0,onChange:e.onDateChange,onUpdated:s[0]||(s[0]=k=>e.highlightShortcut(k)),defaultValue:e.defaultRange,defaultRolling:t.$aioseo.searchStatistics.rolling,isDisabledDate:e.isDisabledDate,shortcuts:e.datepickerShortcuts,size:"small"},null,8,["onChange","defaultValue","defaultRolling","isDisabledDate","shortcuts"])):u("",!0)]),default:n(()=>[v("div",null,[p(y),e.showConnectCta?(r(),g("div",K,[p(S,null,{default:n(()=>[(r(),l(f(t.$route.name)))]),_:1}),p($,{"cta-button-action":"",onCtaButtonClick:e.connect,"cta-button-loading":a.loadingConnect,"show-link":!1,"button-text":a.strings.ctaButtonText,alignTop:!0,"feature-list":[a.strings.feature1,a.strings.feature2,a.strings.feature3,a.strings.feature4]},{"header-text":n(()=>[D(_(a.strings.ctaHeaderText),1)]),description:n(()=>[D(_(a.strings.ctaDescription),1)]),_:1},8,["onCtaButtonClick","cta-button-loading","button-text","feature-list"])])):u("",!0),e.showConnectCta?u("",!0):(r(),l(f(t.$route.name),{key:1}))])]),_:1},8,["page-name","exclude-tabs","showTabs","containerClasses"])}const ne=h(q,[["render",Y]]);export{ne as default};
